<h1>Check Out</h1>
<h4>Date: <%= fruitsTempSaveGlobal.date %></h4>
<div style="width: 30%; display: flex; flex-direction: column; align-items: end;justify-content: center;">
  <table class="ui compact celled table">
  <thead>
    <tr>
      <th>Product</th>
      <th>Jumlah (kg)</th>
      <th>Harga/kg</th>
      <th>Harga Total</th>
    </tr>
  </thead>
  <tbody>
    <% fruitsTempSaveGlobal.items.forEach(item => { %>
      <tr>
        <td><%= item.product %></td> <!-- Removed extra > character -->
        <td><%= item.sum %></td> <!-- Removed extra > character -->
        <td><%= item.harga %></td> <!-- Removed extra > character -->
        <td><%= item.total %></td> <!-- Removed extra > character -->
      </tr>
    <% }); %>
  </tbody>
  <tfoot class="full-width">
    <tr>
      <th colspan="3" style="text-align: right;">Total Belanja : </th>
      <th><%= fruitsTempSaveGlobal.total_belanja %></th>
    </tr>
  </tfoot>
</table>
<div>
  <div class="ui buttons">
    <div class="ui animated fade button red" tabindex="0" onclick="backButton()">
      <div class="visible content">back</div>
      <div class="hidden content">
        <i class="left arrow icon"></i>
      </div>
    </div>
    <div class="or"></div>
    <!-- <button class="ui positive button">Save</button> -->
    <div class="ui animated fade button green" tabindex="0" onclick="buyButton()">
      <div class="visible content">Buy</div>
      <div class="hidden content">
        <i class="shopping cart icon"></i>
      </div>
    </div>
</div>

</div>

<script>
  function backButton(){
    window.history.back()
  }

  function buyButton(){
    fetch("/items/buy", {
      method: "POST",
      headers: { "Content-type": "application/json" },

      // body: JSON.stringify(dataSAVE),
    })
    .then((response) => {
    if (!response.ok) {
      throw new Error(`HTTP error! Status: ${response.status}`);
    }
    return response.text();
  })
      .then((data) => console.log( "respons server : ",data))
      .catch((err) => {
        console.error(err);
      });
      window.location.href='/items/CheckOut'
   }

  
</script>
